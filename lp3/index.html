<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Landing Page 3</title>
  <meta name="viewport" content="width=device-width">
  <!-- Twitter bootstrap basic styles -->
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="/bootstrap/css/bootstrap-responsive.css">

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">
  <!-- Google webfont link -->
<link href='http://fonts.googleapis.com/css?family=Arvo:700|Titillium+Web:900' rel='stylesheet' type='text/css'>


  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main.css">

  <script src="/assets/jquery-1.10.0.js"></script>

  <script type="text/javascript" src='/bootstrap/js/bootstrap.js'></script>
  <script type="text/javascript" src='/assets/custom.js'></script>

</head>
<body class="">

  <div class="container">

    <div class="page-header">
  <h1>Landing Page 3 <small>Branching out</small></h1>
</div>

<div class="tabbable tabs-left">
<ul class="nav nav-tabs" id="myTab">
	
		
		<li class="active"><a href="#1_git_branching_intro" data-toggle="tab">Git branching </a></li>
		
	
		
		<li><a href="#2_commit_merge_branch" data-toggle="tab">Committing and merging </a></li>
		
	
		
		<li><a href="#3_collaborative_branching" data-toggle="tab">Collaborative branching </a></li>
		
	
		
		<li><a href="#4_more_collaborative_branching" data-toggle="tab">More on remote branches </a></li>
		
	
</ul>

<div class="tab-content">

	
	<div class="tab-pane active" id="1_git_branching_intro">
	

		<h2>Git branching</h2>
		<p>Quick and easy branching is one of Git&#8217;s top features. You&#8217;ve already seen some examples of branches (e.g. the solutions branch for the class exercises and the gh-pages branch trick). In this session we&#8217;ll learn more about branching and when it should be used.</p>

<h3 id='why_branch'>Why branch?</h3>

<p>Branching is a way of holding several different versions of your code in the same repository at one time. It allows you to work on the different versions independently and then merge them back together at a later date.</p>

<p>As a concrete example, suppose you are working on a static website as a team. One member of your team (Bob) wants to try out a different site design, while the rest of you want to continue to work on the site content.</p>

<ul>
<li>Bob creates a new branch to try out the new design.</li>

<li>When he is finished he pushes the new branch up to GitHub.</li>

<li>Everyone else can then pull down the new branch to have a look.</li>

<li>If the team like Bob&#8217;s new design they can merge his branch into the main branch. If not they can discard it or ask him to do some more work.</li>
</ul>

<p>Branches allow you to quickly try out and share new ideas, without affecting the main version of your code. They allow you to pick and choose which of these experiments you want to use and which to discard. Branches are an invaluable tool when it comes to developing, both in teams and alone.</p>

<h3 id='creating_a_branch'>Creating a branch</h3>

<p>To create a branch you use the <code>git checkout -b</code> command.</p>

<pre><code>$ git checkout -b redesign</code></pre>

<p>This will create a new branch starting from the current version of your code. You can see this new branch by running</p>

<pre><code>$ git branch
  master
* redesign</code></pre>

<p>You will see that you have two branches: <code>master</code> and <code>redesign</code>. The <code>*</code> tells you that you are currently on the <code>redesign</code> branch.</p>

<p>The <code>master</code> branch is the default branch that is set up when you create the repository. So far all the work you have done has been on your repo&#8217;s <code>master</code> branch.</p>

<p>Another useful tool for viewing the different branches is <code>gitk</code>:</p>

<pre><code>$ gitk --all</code></pre>

<p>This will show you the current state of your repository, including all the different branches. (If you are on a Mac, you should consider downloading <a href='http://gitx.frim.nl/'>gitx</a>, which is basically a much nicer version of <code>gitk</code>.)</p>

<h3 id='switching_back_and_forth'>Switching back and forth</h3>

<p>To switch between branches use the <code>git checkout</code> command (<strong>without</strong> the <code>-b</code>). If you&#8217;ve made any changes to the branch you were on, you will need to add and commit them before you move.</p>

<pre><code>$ git checkout master
$ git checkout redesign</code></pre>
<div class='exercise alert alert-info'><strong>
<p>Task:</p>
</strong>
<ol>
<li>
<p>Navigate to the <code>ruby4</code> folder on the command line.</p>
</li>

<li>
<p>Add and commit any changes you have made:</p>

<pre><code> $ git add --all
 $ git commit -m &quot;Work on exercises.&quot;</code></pre>
</li>

<li>
<p>Check out the solutions branch and do another <code>git branch</code> to check it has worked.</p>

<pre><code> $ git checkout solutions
 $ git branch</code></pre>
</li>

<li>
<p>Run the <code>i_have_a_dream</code> solution</p>

<pre><code> $ ruby `i_have_a_dream.rb`</code></pre>

<p>and have a look at <code>index.html</code> in your browser.</p>
</li>

<li>
<p>Move back to the master branch.</p>

<pre><code> $ git checkout master</code></pre>
</li>
</ol>
</div>
	</div>

	
	<div class="tab-pane " id="2_commit_merge_branch">
	

		<h2>Committing and merging</h2>
		<p>We&#8217;ve seen how to create a branch and how to move between branches. In this section we look at how to add code to a branch and how to combine two branches.</p>

<h3 id='committing_to_a_branch'>Committing to a branch</h3>

<p>You&#8217;ve actually done this loads of times before. What you before thought of as &#8216;committing to the repository&#8217; was actually &#8216;committing to a branch in the repository&#8217;. In particular, you were committing to the default <code>master</code> branch.</p>

<pre><code>$ git add --all
$ git commit -m &quot;Made commits to new design&quot;</code></pre>

<p>You use <code>gitk</code> to view the new state of the repository.</p>

<h3 id='merging_branches'>Merging branches</h3>

<p>Merging is the process by which you take the changes you&#8217;ve made on one branch and incorporate them into another. To merge:</p>

<ol>
<li>You need to be on the branch that you want to incorporate the changes into.</li>

<li>Use the <code>git merge</code> command specifying the branch that you want to bring in.</li>
</ol>

<p>For example to merge <code>redesign</code> into <code>master</code>:</p>

<pre><code>$ git checkout master
$ git merge redesign</code></pre>

<p>This might work straight away or you might have a merge conflict to fix. You do this just like when using <code>git pull</code>:</p>

<ul>
<li>First fix the files, taking out the <code>&lt;&lt;&lt;&lt;</code> bits.</li>

<li>Add and commit the changes.</li>
</ul>

<h3 id='deleting_branches'>Deleting branches</h3>

<p>After you&#8217;ve merged in a branch you might want to delete that branch, to keep things tidy. To do this do</p>

<pre><code>$ git branch -d redesign</code></pre>

<p>If you haven&#8217;t already merged the branch it won&#8217;t let you delete it. If you really want to get rid of it you can use <code>-D</code> instead of <code>-d</code>, but this will remove the work in the branch for good!</p>
<div class='exercise alert alert-info'><strong>
<p>Task:</p>
</strong>
<ol>
<li>
<p>Make a new folder called <code>branching_test</code> in your <code>coding_course</code> folder.</p>
</li>

<li>
<p>Set it up as a git repository: in the <code>branching_test</code> folder run</p>

<pre><code> $ git init</code></pre>
</li>

<li>
<p>Add an <code>index.html</code> with some simple text in it. Save, add and commit:</p>

<pre><code> $ git add --all
 $ git commit -m &quot;Initial commit&quot;</code></pre>
</li>

<li>
<p>Create a new branch called <code>redesign</code>:</p>

<pre><code> $ git checkout -b redesign</code></pre>
</li>

<li>
<p>Add a new file called <code>about.html</code> with some simple text in it. Save and and commit (on the redesign branch):</p>

<pre><code> $ git add --all
 $ git commit -m &quot;Added about.html&quot;</code></pre>
</li>

<li>
<p>Checkout <code>master</code>. Notice how <code>about.html</code> has gone.</p>

<pre><code> $ git checkout master</code></pre>

<p>You might also want to try <code>gitk</code> at this point.</p>
</li>

<li>
<p>Merge <code>redesign</code> into <code>master</code>. Notice that you should now see <code>about.html</code> in the same folder.</p>
</li>

<li>
<p>Delete the <code>redesign</code> branch.</p>
</li>
</ol>
</div>
	</div>

	
	<div class="tab-pane " id="3_collaborative_branching">
	

		<h2>Collaborative branching</h2>
		<h3 id='about_remotes'>Â About remotes</h3>

<p>A git remote stores the location of another repository. It is possible to have mutiple remotes for a single repositry. You can see a list of the remotes by running the command</p>

<pre><code>$ git remote -v
origin  git@github.com:tomclose/git_test.git (fetch)
origin  git@github.com:tomclose/git_test.git (push)</code></pre>

<p>The default remote is called <code>origin</code>. When you clone a repository it will automatically set up the <code>origin</code> to point to the repository (e.g. on GitHub) that you cloned it from and will use this for future <code>pull</code> operations.</p>

<p>You can add a remote by using the <code>git remote add</code> command:</p>

<pre><code>$ git remote add origin git@github.com:my_username/my_repo.git</code></pre>

<p>You might recognise this - it&#8217;s the first of the two lines you use when you push an existing repository up to github!</p>

<h3 id='pushing_up_a_branch'>Pushing up a branch</h3>

<p>Once you have a remote you can push your branches up. The following command will push the <code>master</code> branch up to the <code>origin</code> (<strong>for the first time</strong>):</p>

<pre><code>$ git push -u origin master
Counting objects: 3, done.
Writing objects: 100% (3/3), 216 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To git@github.com:tomclose/git_test.git
 * [new branch]      master -&gt; master</code></pre>

<p>We will say more about the <code>-u</code> bit on the next page - it basically sets things up so that <code>git pull</code> and <code>git push</code> will work automatically. If you make some changes and want to push them up (after the first time) you just need to do</p>

<pre><code>$ git push</code></pre>

<p>and it will know what to do.</p>

<h3 id='working_on_someone_elses_branch'>Working on someone else&#8217;s branch</h3>

<p>In this section we will be talking about three different types of branches:</p>

<ul>
<li><strong>remote branches</strong>: these exist in the remote repository.</li>

<li><strong>remote-tracking branches</strong>: these exist on your local machine. They mirror the states of the remote branches exactly.</li>

<li><strong>local branches</strong>: these exist on your local machine. They are the branches that you can work on directly.</li>
</ul>

<p>Before you work on someone else&#8217;s (remote) branch you have to get it from the remote repository. To do this you need to use the <code>git fetch</code> command. By default this will fetch all the remote branches from the <code>origin</code> remote.</p>

<pre><code>$ git fetch</code></pre>

<p>All the remote branches will be pulled down into &#8216;remote-tracking&#8217; branches. You can see these by doing:</p>

<pre><code>$ git branch --all
* master
  remotes/origin/HEAD -&gt; origin/redesign
  remotes/origin/master
  remotes/origin/redesign</code></pre>

<p>The remote-tracking branches are the ones that start <code>remotes/origin</code>. Remote-tracking branches are special - they exist only to store the branches from the remote repository. You can&#8217;t do any work on them directly. If you want to work on one of these branches you first need to create a local branch. To do this use the <code>git checkout</code> command:</p>

<pre><code>$ git checkout redesign
Branch master set up to track remote branch redesign from origin.
Switched to a new branch &#39;redesign&#39;</code></pre>

<p>Normally this would switch to the local <code>redesign</code> branch. As you don&#8217;t have a local <code>redesign</code> branch, git does a clever thing: it sees you have a <code>remote/origin/redesign</code> and so creates a local branch from that instead. You can see this by doing a <code>git branch --all</code>:</p>

<pre><code>$ git branch --all
  master
* redesign
  remotes/origin/HEAD -&gt; origin/redesign
  remotes/origin/master
  remotes/origin/redesign</code></pre>

<p>You can then work on this branch. To push your changes to the branch back to the repository just do</p>

<pre><code>$ git push</code></pre>

<p>(with the <code>redesign</code> branch open).</p>
<div class='exercise alert alert-info'><strong>
<p>Task:</p>
</strong>
<ol>
<li>
<p>In your <code>landing_page</code> folder, try the following commands:</p>

<pre><code> $ git remote -v
 $ git branch --all</code></pre>
</li>

<li>
<p>Choose one person in your team. Everyone in the team watch while they create a branch called <code>gh-pages</code> and push it to GitHub:</p>

<pre><code> # (starting on the master branch)
 $ git checkout -b gh-pages
 $ git push -u origin gh-pages</code></pre>
</li>

<li>
<p>Everyone else in the team should then pull this branch down and check it out:</p>

<pre><code> $ git fetch
 $ git checkout gh-pages</code></pre>
</li>

<li>
<p>Get someone on your team to check out the <code>master</code> branch and do some work on it. They should then add, commit and push their work.</p>
</li>

<li>
<p>Get another member of your team to pull their changes, merge them into <code>gh-pages</code> and then push the <code>gh-pages</code> branch up.</p>
</li>
</ol>
</div>
	</div>

	
	<div class="tab-pane " id="4_more_collaborative_branching">
	

		<h2>More on remote branches</h2>
		<p>The material on this page is purely to explain remote branches in slightly more detail. Feel free to ignore it if you&#8217;ve heard enough already!</p>

<h3 id='pulling_and_upstream_branches'>Pulling and upstream branches</h3>

<p>We&#8217;ve essentially seen two ways of getting information from one branch into another:</p>

<ul>
<li><code>git pull</code> incorporates the contents of a remote branch into your current branch.</li>

<li><code>git merge</code> incorporates the contents of a local branch into your current branch.</li>
</ul>

<p>In fact, <code>git pull</code> is really built using <code>git merge</code>. The following two things are (roughly) equivalent:</p>

<pre><code>(on branch master)
$ git pull

$ git fetch
$ git merge origin/master</code></pre>

<p>A <code>pull</code> is just a <code>fetch</code> followed by a <code>merge</code> with a remote-tracking branch.</p>

<p>Unfortunately this doesn&#8217;t quite make sense: when we do the <code>fetch</code>+<code>merge</code> we specify which branch to merge; when we do the git pull we don&#8217;t. How does git know which branch to fetch and merge when you do the pull?</p>

<p>When doing a pull, git will automatically fetch and merge your current branch&#8217;s <em>upstream branch</em>. Consider the following chain of events:</p>

<pre><code>(in an existing git repository)
$ git remote add origin git@github.com:tomclose/git_test.git
$ git push -u origin master
$ git push origin redesign</code></pre>

<p>First we set up the remote repository <code>origin</code>. We then push master to the origin with the <code>-u</code> flag. This sets the upstream of our <code>master</code> to be <code>origin/master</code>. We then push <code>redesign</code> to the <code>origin</code>. This doesn&#8217;t set the upstream. You can see what this has done with the <code>git remote show</code> command:</p>

<pre><code>$ git remote show origin
* remote origin
  Fetch URL: git@github.com:tomclose/git_test.git
  Push  URL: git@github.com:tomclose/git_test.git
  HEAD branch: master
  Remote branches:
    master   tracked
    redesign tracked
  Local branch configured for &#39;git pull&#39;:
    master merges with remote master
  Local refs configured for &#39;git push&#39;:
    master   pushes to master   (up to date)
    redesign pushes to redesign (up to date)</code></pre>

<p>There are two remote branches on the <code>origin</code>. We&#8217;re tracking both of them (i.e. we have remote-tracking branches for each). Our local <code>master</code> branch knows to push to the remote <code>master</code> and merge from the remote <code>master</code>. The local <code>redesign</code> branch only knows to push to the remote <code>redesign</code>. It doesn&#8217;t know about merging.</p>

<p>Let&#8217;s see what happens when we try to pull:</p>

<pre><code>(after checking out redesign)
$ git pull
There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details

    git pull &lt;remote&gt; &lt;branch&gt;

If you wish to set tracking information for this branch you can do so with:

    git branch --set-upstream redesign origin/&lt;branch&gt;</code></pre>

<p>It doesn&#8217;t know what to do.</p>

<p>We can fix this using the command:</p>

<pre><code>$ git branch -u redesign origin/redesign</code></pre>

<p>In summary, the following two things are equivalent:</p>

<pre><code>$ git push -u origin redesign

$ git push origin redesign
$ git branch -u redesign origin/redesign</code></pre>

<h3 id='checking_out_remote_branches'>Checking out remote branches</h3>

<p>Another thing that set the upstream on the branch was using <code>git checkout</code> to get a local version of a remote branch.</p>

<p>Say we&#8217;re in the following state:</p>

<pre><code>$ git branch --all
* master
  remotes/origin/HEAD -&gt; origin/redesign
  remotes/origin/master
  remotes/origin/redesign</code></pre>

<p>we have a local and remote <code>master</code> branch, but only a remote <code>redesign</code> branch. The following three sets of commands are then equivalent:</p>

<pre><code>$ git checkout redesign

$ git checkout --track redesign origin/redesign

$ git checkout redesign origin/redesign
$ git branch -u redesign origin/redesign</code></pre>

<p>This is useful to know because it allows you to call your local branches something different e.g.</p>

<pre><code>$ git checkout --track bobs_redesign origin/redesign</code></pre>

<p>which you wouldn&#8217;t be able to do with the first version. This becomes most useful if you have several remotes - if you only have <code>origin</code> it makes most sense to keep the names the same.</p>
	</div>

</div>

</div>




  </div> <!-- /container -->

</body>
</html>
